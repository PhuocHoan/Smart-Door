[
    {
        "id": "bb1ee2a6ccaf9c7e",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ee89751f5bfb2ec0",
        "type": "group",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "Door-history",
        "style": {
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "8c222a580019e602",
            "5ca9347ec1a26ddd",
            "23c83260a309e8c8",
            "aff71c60c9fbe35b",
            "9e125a1c5770f007",
            "97b1796cfec1525e",
            "0fd08335b611ebb3"
        ],
        "x": 14,
        "y": 1739,
        "w": 572,
        "h": 622
    },
    {
        "id": "bf5a10776e700965",
        "type": "group",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "subscribe",
        "style": {
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "65198b9c4cd46731",
            "c5e782e8c8626d05"
        ],
        "x": 534,
        "y": 1119,
        "w": 372,
        "h": 182
    },
    {
        "id": "b59d681925887269",
        "type": "group",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "Adjust",
        "style": {
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "feb005d24ec45759",
            "a67bf92e8403b43b",
            "dc2da3a28db5222f",
            "f2c9569b6154275e",
            "1fdd992b4b70d13d",
            "92803231ba239660",
            "68109583cc7a4685",
            "03a90267ff5d7d2b",
            "20d4f3887218b71e",
            "928b26ea3181199f",
            "3eddec9b874f767d",
            "f4d2f38c5ca3ee92",
            "6430b060282da216",
            "dc1c378c8b4017b8",
            "e917ac0525824880",
            "58ef6dca445c9a91",
            "bfbbf6eb0d74097d"
        ],
        "x": 434,
        "y": 1359,
        "w": 1322,
        "h": 362
    },
    {
        "id": "a75a2bffeb5a2b7a",
        "type": "group",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "Login Page",
        "style": {
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "18669188e9251bb5",
            "5495a6c45f78f0e3",
            "a8b35bb752e9b35f",
            "a7f069b0666d1cbd",
            "591090f3326cf35c",
            "ad0bb485c8b7f902",
            "7dfc12d36c928b9a",
            "5d877cc35cbda011",
            "7558e9563daa5a24",
            "eac5e550373571de",
            "4d514d487df7876c"
        ],
        "x": 14,
        "y": 79,
        "w": 1252,
        "h": 282
    },
    {
        "id": "682c30da44ac52f2",
        "type": "group",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "Email subscription",
        "style": {
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "7c4d13cfddd9d314",
            "a7e23a7ee95daa1a",
            "fb1acd15bdf51a60",
            "a35f889184595c11",
            "2165b2292763b349",
            "24652ddb9a58cdfd",
            "7feeae98ea87c6d7",
            "dccc0a653a5541bf",
            "b58965e30516c2ce",
            "0b50e9a677b28789",
            "cb9be315a72dbccd",
            "dc113ad7c506477d"
        ],
        "x": 34,
        "y": 2419,
        "w": 1312,
        "h": 242
    },
    {
        "id": "7632c1f338ea3ccc",
        "type": "group",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "Register Page",
        "style": {
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "81a9e5f26a7c62d9",
            "3f9afaed38185bdf",
            "0f24db331bc7c7b6",
            "e8ba9530b8a0089a",
            "8060202cc6962ed2",
            "967660745bc37b08",
            "d88a823d014461c8",
            "64f2295ea5f13d61",
            "357ea44dab969a74",
            "54d84f33be19eba9",
            "a62c4d21c5cd643b",
            "81c9acbcbbec3bdd",
            "cf637d4002e47aef",
            "e934ae7383e325b8"
        ],
        "x": 34,
        "y": 479,
        "w": 1432,
        "h": 262
    },
    {
        "id": "598e6a60b0659603",
        "type": "ui_ui_control",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "events": "all",
        "x": 1480,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "d72789fe6d11728a",
        "type": "ui_button",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "group": "242bb5e8cc6e236f",
        "order": 7,
        "width": 7,
        "height": 1,
        "passthru": false,
        "label": "log out",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1230,
        "y": 60,
        "wires": [
            [
                "2535df10e20e94b1"
            ]
        ]
    },
    {
        "id": "2535df10e20e94b1",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Log in\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1440,
        "y": 60,
        "wires": [
            [
                "598e6a60b0659603"
            ]
        ]
    },
    {
        "id": "8c222a580019e602",
        "type": "ui_table",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "ee89751f5bfb2ec0",
        "group": "975a56c88443a6df",
        "name": "History",
        "order": 7,
        "width": 12,
        "height": 4,
        "columns": [
            {
                "field": "",
                "title": "",
                "width": "10%",
                "align": "left",
                "formatter": "rownum",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "timestamp",
                "title": "Timestamp",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "act",
                "title": "Action",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "result",
                "title": "Result",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "temp",
                "title": "Temperature",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "stat",
                "title": "Status",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 500,
        "y": 2180,
        "wires": []
    },
    {
        "id": "5ca9347ec1a26ddd",
        "type": "ui_date_picker",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "ee89751f5bfb2ec0",
        "name": "",
        "label": "Choose Date for detail Door info",
        "group": "975a56c88443a6df",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "x": 170,
        "y": 1780,
        "wires": [
            [
                "8c222a580019e602"
            ]
        ]
    },
    {
        "id": "23c83260a309e8c8",
        "type": "inject",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "ee89751f5bfb2ec0",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"timestamp\":\"12:22:10\",\"act\":\"Open door\",\"result\":\"Fail\",\"temp\":\"30\",\"stat\":\"High\"},{\"timestamp\":\"12:22:23\",\"act\":\"Open door\",\"result\":\"Successful\",\"temp\":\"28\",\"stat\":\"Normal\"},{\"timestamp\":\"12:22:30\",\"act\":\"Close door\",\"result\":\"Fail\",\"temp\":\"22\",\"stat\":\"Low\"}]",
        "payloadType": "json",
        "x": 290,
        "y": 2220,
        "wires": [
            [
                "8c222a580019e602"
            ]
        ]
    },
    {
        "id": "aff71c60c9fbe35b",
        "type": "ui_dropdown",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "ee89751f5bfb2ec0",
        "name": "",
        "label": "Action",
        "tooltip": "",
        "place": "",
        "group": "975a56c88443a6df",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "All",
                "value": "All",
                "type": "str"
            },
            {
                "label": "Open Door",
                "value": "Open Door",
                "type": "str"
            },
            {
                "label": "Close Door",
                "value": "Close Door",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 1900,
        "wires": [
            [
                "0fd08335b611ebb3"
            ]
        ]
    },
    {
        "id": "9e125a1c5770f007",
        "type": "ui_dropdown",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "ee89751f5bfb2ec0",
        "name": "",
        "label": "Result",
        "tooltip": "",
        "place": "",
        "group": "975a56c88443a6df",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "All",
                "value": "All",
                "type": "str"
            },
            {
                "label": "Successful",
                "value": "Successful",
                "type": "str"
            },
            {
                "label": "Fail",
                "value": "Fail",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 1940,
        "wires": [
            [
                "0fd08335b611ebb3"
            ]
        ]
    },
    {
        "id": "97b1796cfec1525e",
        "type": "ui_dropdown",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "ee89751f5bfb2ec0",
        "name": "",
        "label": "Status",
        "tooltip": "",
        "place": "",
        "group": "975a56c88443a6df",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "All",
                "value": "All",
                "type": "str"
            },
            {
                "label": "High",
                "value": "High",
                "type": "str"
            },
            {
                "label": "Normal",
                "value": "Normal",
                "type": "str"
            },
            {
                "label": "Low",
                "value": "Low",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 1980,
        "wires": [
            [
                "0fd08335b611ebb3"
            ]
        ]
    },
    {
        "id": "0fd08335b611ebb3",
        "type": "ui_button",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "ee89751f5bfb2ec0",
        "name": "",
        "group": "975a56c88443a6df",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Apply",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 410,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "65198b9c4cd46731",
        "type": "mqtt in",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "bf5a10776e700965",
        "name": "",
        "topic": "/group_21/local/temperature/temperature",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "3d9dae46dcba93c8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 720,
        "y": 1260,
        "wires": [
            [
                "ad49cff7cce3bf23",
                "be53befa0fde8753"
            ]
        ]
    },
    {
        "id": "c5e782e8c8626d05",
        "type": "mqtt in",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "bf5a10776e700965",
        "name": "",
        "topic": "/group_21/local/humidity",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "3d9dae46dcba93c8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 750,
        "y": 1160,
        "wires": [
            [
                "90586f7b16279b8a"
            ]
        ]
    },
    {
        "id": "feb005d24ec45759",
        "type": "ui_slider",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "Lower Bound Temperature",
        "label": "Lower Bound",
        "tooltip": "",
        "group": "242bb5e8cc6e236f",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "",
        "topicType": "str",
        "min": 0,
        "max": 100,
        "step": 1,
        "x": 820,
        "y": 1460,
        "wires": [
            [
                "928b26ea3181199f"
            ]
        ]
    },
    {
        "id": "a67bf92e8403b43b",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "store lower temp",
        "rules": [
            {
                "t": "set",
                "p": "lowerTemp",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "x": 1380,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "dc2da3a28db5222f",
        "type": "ui_slider",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "Upper Bound Temperature",
        "label": "Upper Bound",
        "tooltip": "",
        "group": "242bb5e8cc6e236f",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "",
        "topicType": "str",
        "min": 0,
        "max": 100,
        "step": 1,
        "x": 820,
        "y": 1520,
        "wires": [
            [
                "3eddec9b874f767d"
            ]
        ]
    },
    {
        "id": "f2c9569b6154275e",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "store upper temp",
        "rules": [
            {
                "t": "set",
                "p": "upperTemp",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "x": 1390,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "1fdd992b4b70d13d",
        "type": "ui_button",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "Apply",
        "group": "242bb5e8cc6e236f",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Apply",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 710,
        "y": 1660,
        "wires": [
            [
                "92803231ba239660"
            ]
        ]
    },
    {
        "id": "92803231ba239660",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "Prepare MQTT Payload",
        "func": "var lower = {}, upper = {};\nlower.payload = flow.get('lowerTemp');\nupper.payload = flow.get('upperTemp');\nreturn [upper, lower];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 1660,
        "wires": [
            [
                "68109583cc7a4685"
            ],
            [
                "20d4f3887218b71e"
            ]
        ]
    },
    {
        "id": "68109583cc7a4685",
        "type": "mqtt out",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "",
        "topic": "/group_21/web/temperature/upper_bound",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "3d9dae46dcba93c8",
        "x": 1280,
        "y": 1620,
        "wires": []
    },
    {
        "id": "03a90267ff5d7d2b",
        "type": "ui_text",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "group": "242bb5e8cc6e236f",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Adjust warning Temperature",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 700,
        "y": 1400,
        "wires": []
    },
    {
        "id": "def456a09534c7ea",
        "type": "mqtt in",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "topic": "/group_21/local/door_unlock",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "3d9dae46dcba93c8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 940,
        "wires": [
            [
                "d275bfcab74a1b67"
            ]
        ]
    },
    {
        "id": "4e8c1cc57d930772",
        "type": "mqtt in",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "topic": "/group_21/local/door_lock",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "3d9dae46dcba93c8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 1000,
        "wires": [
            [
                "c61a3e884a12aa90"
            ]
        ]
    },
    {
        "id": "c61a3e884a12aa90",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 980,
        "wires": [
            [
                "cadc6f4f22eef2b8"
            ]
        ]
    },
    {
        "id": "d275bfcab74a1b67",
        "type": "switch",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 920,
        "wires": [
            [
                "4c03b9d089ac3c92"
            ],
            [
                "6471c5688480bbb1"
            ]
        ]
    },
    {
        "id": "6471c5688480bbb1",
        "type": "http request",
        "z": "bb1ee2a6ccaf9c7e",
        "d": true,
        "name": "send warning to user",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 760,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "2283ebb1a07ce061",
        "type": "ui_text",
        "z": "bb1ee2a6ccaf9c7e",
        "group": "d1aef56c328c2c49",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Door status",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1730,
        "y": 1000,
        "wires": []
    },
    {
        "id": "4c03b9d089ac3c92",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status",
                "pt": "flow",
                "to": "open",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "open",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 860,
        "wires": [
            [
                "2283ebb1a07ce061"
            ]
        ]
    },
    {
        "id": "cadc6f4f22eef2b8",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status",
                "pt": "flow",
                "to": "close",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "close",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 980,
        "wires": [
            [
                "2283ebb1a07ce061"
            ]
        ]
    },
    {
        "id": "ad49cff7cce3bf23",
        "type": "ui_gauge",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "group": "d1aef56c328c2c49",
        "order": 3,
        "width": 6,
        "height": 4,
        "gtype": "gage",
        "title": "Temperature",
        "label": "",
        "format": "{{value}}°C",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1110,
        "y": 1260,
        "wires": []
    },
    {
        "id": "90586f7b16279b8a",
        "type": "ui_gauge",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "group": "d1aef56c328c2c49",
        "order": 4,
        "width": 6,
        "height": 4,
        "gtype": "wave",
        "title": "Humidity",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1120,
        "y": 1120,
        "wires": []
    },
    {
        "id": "be53befa0fde8753",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "check temp corresponding to temp status",
        "func": "var lowerTemp = flow.get('lowerTemp')\nvar upperTemp = flow.get('upperTemp')\nif (msg.payload > upperTemp) {\n    msg.payload = \"High\"\n} else if (lowerTemp <= msg.payload && msg.payload <= upperTemp) {\n    msg.payload = \"Normal\"\n} else {\n    msg.payload = \"Low\"\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 1320,
        "wires": [
            [
                "6bf21ef6a8ad08c3"
            ]
        ]
    },
    {
        "id": "6bf21ef6a8ad08c3",
        "type": "ui_text",
        "z": "bb1ee2a6ccaf9c7e",
        "group": "d1aef56c328c2c49",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Temperature status",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1350,
        "y": 1320,
        "wires": []
    },
    {
        "id": "fe32842bfd203ad0",
        "type": "mqtt in",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "topic": "/group_21/local/temperature/upper_bound",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "3d9dae46dcba93c8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 200,
        "y": 1140,
        "wires": [
            [
                "58ef6dca445c9a91"
            ]
        ]
    },
    {
        "id": "866807bbb36a195a",
        "type": "mqtt in",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "topic": "/group_21/local/temperature/lower_bound",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "3d9dae46dcba93c8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 200,
        "y": 1080,
        "wires": [
            [
                "bfbbf6eb0d74097d"
            ]
        ]
    },
    {
        "id": "20d4f3887218b71e",
        "type": "mqtt out",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "",
        "topic": "/group_21/web/temperature/lower_bound",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "3d9dae46dcba93c8",
        "x": 1280,
        "y": 1680,
        "wires": []
    },
    {
        "id": "1a7075cfd82dafae",
        "type": "mqtt out",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "topic": "/group_21/web/door",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "3d9dae46dcba93c8",
        "x": 1620,
        "y": 800,
        "wires": []
    },
    {
        "id": "928b26ea3181199f",
        "type": "switch",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "check temperature limit condition",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "upperTemp",
                "vt": "flow"
            },
            {
                "t": "gte",
                "v": "upperTemp",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1120,
        "y": 1460,
        "wires": [
            [
                "a67bf92e8403b43b"
            ],
            [
                "e917ac0525824880"
            ]
        ]
    },
    {
        "id": "3eddec9b874f767d",
        "type": "switch",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "check temperature limit condition",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "lowerTemp",
                "vt": "flow"
            },
            {
                "t": "lte",
                "v": "lowerTemp",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1120,
        "y": 1520,
        "wires": [
            [
                "f2c9569b6154275e"
            ],
            [
                "dc1c378c8b4017b8"
            ]
        ]
    },
    {
        "id": "f4d2f38c5ca3ee92",
        "type": "ui_toast",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1640,
        "y": 1460,
        "wires": []
    },
    {
        "id": "6430b060282da216",
        "type": "ui_toast",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1640,
        "y": 1540,
        "wires": []
    },
    {
        "id": "dc1c378c8b4017b8",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "The upper limit temperature must be greater than the lower limit temperature.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 1540,
        "wires": [
            [
                "6430b060282da216"
            ]
        ]
    },
    {
        "id": "e917ac0525824880",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "The lower limit temperature must be less than the upper limit temperature.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 1460,
        "wires": [
            [
                "f4d2f38c5ca3ee92"
            ]
        ]
    },
    {
        "id": "58ef6dca445c9a91",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "set default temp limit",
        "func": "if (flow.get('upperTemp') == undefined) {\n    flow.set('upperTemp', msg.payload)\n}\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1520,
        "wires": [
            [
                "dc2da3a28db5222f"
            ]
        ]
    },
    {
        "id": "bfbbf6eb0d74097d",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "b59d681925887269",
        "name": "set default temp limit",
        "func": "if (flow.get('lowerTemp') == undefined) {\n    flow.set('lowerTemp', msg.payload)\n}\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1460,
        "wires": [
            [
                "feb005d24ec45759"
            ]
        ]
    },
    {
        "id": "20a025758319506e",
        "type": "ui_button",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "group": "242bb5e8cc6e236f",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "open/close Door",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 980,
        "y": 840,
        "wires": [
            [
                "a5f987731839baaf"
            ]
        ]
    },
    {
        "id": "3a0b1b1730b86c98",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "function 2",
        "func": "if (flow.get('status') == 'open') {\n    msg.payload = 0\n    flow.set('status', 'close')\n} else if (flow.get('status') == 'close') {\n    msg.payload = 1\n    flow.set('status', 'open')\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "a5f987731839baaf",
        "type": "switch",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "property": "status",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "open",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "close",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1150,
        "y": 840,
        "wires": [
            [
                "eec3d2f38602953d"
            ],
            [
                "19c46c1c28dcb2a2"
            ]
        ]
    },
    {
        "id": "eec3d2f38602953d",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "open->close",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "status",
                "pt": "flow",
                "to": "close",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 800,
        "wires": [
            [
                "1a7075cfd82dafae",
                "eef2d93d01d711bf"
            ]
        ]
    },
    {
        "id": "19c46c1c28dcb2a2",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "close->open",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "status",
                "pt": "flow",
                "to": "open",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 900,
        "wires": [
            [
                "1a7075cfd82dafae",
                "8a097da3438a9ff5"
            ]
        ]
    },
    {
        "id": "eef2d93d01d711bf",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "close",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "close",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1510,
        "y": 900,
        "wires": [
            [
                "2283ebb1a07ce061"
            ]
        ]
    },
    {
        "id": "8a097da3438a9ff5",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "open",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "open",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1510,
        "y": 940,
        "wires": [
            [
                "2283ebb1a07ce061"
            ]
        ]
    },
    {
        "id": "c8af0e10dbbaf2b5",
        "type": "ui_chart",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "",
        "group": "975a56c88443a6df",
        "order": 1,
        "width": 12,
        "height": 5,
        "label": "Temperature line chart",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "No Data",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1380,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "18669188e9251bb5",
        "type": "ui_form",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "login",
        "label": "",
        "group": "a41ff99becdf55cd",
        "order": 1,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Username",
                "value": "username",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "Password",
                "value": "password",
                "type": "password",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "username": "",
            "password": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": false,
        "x": 90,
        "y": 200,
        "wires": [
            [
                "7dfc12d36c928b9a",
                "7558e9563daa5a24"
            ]
        ]
    },
    {
        "id": "5495a6c45f78f0e3",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "check login",
        "func": "var success = {};\nvar fail = {};\n\nif (msg.payload.success == true) {\n    success.topic = \"Login success!\"\n    success.payload = \"Welcome.\";\n    return [success, null];\n}\nelse {\n    fail.topic = \"Login fail!\"\n    fail.payload = `${msg.payload.message}`;\n    return [null, fail];\n}",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 240,
        "wires": [
            [
                "a8b35bb752e9b35f",
                "a7f069b0666d1cbd"
            ],
            [
                "a8b35bb752e9b35f"
            ]
        ]
    },
    {
        "id": "a8b35bb752e9b35f",
        "type": "ui_toast",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1150,
        "y": 160,
        "wires": []
    },
    {
        "id": "a7f069b0666d1cbd",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "Show Dashboard",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Dashboard\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 300,
        "wires": [
            [
                "598e6a60b0659603"
            ]
        ]
    },
    {
        "id": "591090f3326cf35c",
        "type": "ui_button",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "",
        "group": "a41ff99becdf55cd",
        "order": 3,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Register",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 100,
        "y": 120,
        "wires": [
            [
                "ad0bb485c8b7f902"
            ]
        ]
    },
    {
        "id": "ad0bb485c8b7f902",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Register\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "598e6a60b0659603"
            ]
        ]
    },
    {
        "id": "7dfc12d36c928b9a",
        "type": "http request",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://api.thingspeak.com/channels/2632445/feeds.json?api_key=JA8MVJK4ELKLCWMX",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 150,
        "y": 320,
        "wires": [
            [
                "5d877cc35cbda011"
            ]
        ]
    },
    {
        "id": "5d877cc35cbda011",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "Database Account",
        "func": "msg.topic = \"databaseAccounts\"\nmsg.payload = {databaseAccount: msg.payload}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 320,
        "wires": [
            [
                "eac5e550373571de"
            ]
        ]
    },
    {
        "id": "7558e9563daa5a24",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "Enter Account",
        "func": "msg.topic = \"enteredAccount\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 200,
        "wires": [
            [
                "eac5e550373571de"
            ]
        ]
    },
    {
        "id": "eac5e550373571de",
        "type": "join",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "useparts": false,
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 570,
        "y": 240,
        "wires": [
            [
                "4d514d487df7876c"
            ]
        ]
    },
    {
        "id": "4d514d487df7876c",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "a75a2bffeb5a2b7a",
        "name": "Check Database",
        "func": "let accountUsername = msg.payload.enteredAccount.username; \nlet accountPassword = msg.payload.enteredAccount.password; \n\nlet databaseAccount = JSON.stringify(msg.payload.databaseAccounts, null, 4);\n\nlet usernameSearchString = `\\\\\"field1\\\\\":\\\\\"${accountUsername}\\\\\"`;\nlet usernameIndex = databaseAccount.indexOf(usernameSearchString);\n\nif (usernameIndex !== -1) {\n    let passwordSearchString = `\\\\\"field2\\\\\":\\\\\"`;\n    let passwordStartIndex = databaseAccount.indexOf(passwordSearchString, usernameIndex);\n    // msg.payload = passwordSearchString;\n    // return msg;\n    let validPassword = false;\n    if (passwordStartIndex !== -1) {\n        let passwordEndIndex = databaseAccount.indexOf('\\\\\"', passwordStartIndex + passwordSearchString.length);\n        let extractedPassword = databaseAccount.substring(passwordStartIndex + passwordSearchString.length, passwordEndIndex);\n        // msg.payload = extractedPassword;\n        // return msg;\n        if (extractedPassword === accountPassword) {\n            validPassword = true;\n            msg.payload = { success: true, message: \"Login successful\" };\n        }\n    }\n    if (!validPassword) {\n        msg.payload = { success: false, message: \"Incorrect password\" };\n    }\n} else {\n    msg.payload = { success: false, message: \"Username not found\" };\n}\n// msg.payload = accountPassword;\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 240,
        "wires": [
            [
                "5495a6c45f78f0e3"
            ]
        ]
    },
    {
        "id": "7c4d13cfddd9d314",
        "type": "http request",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://api.thingspeak.com/update?api_key=NPPQ0GWP92AWFKLR&field1={{payload.email}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1070,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "a7e23a7ee95daa1a",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "Check Existed",
        "func": "let enteredEmail = msg.payload.formEmail.formEmail;\nlet resultString = `\\\\\"field1\\\\\":\\\\\"${enteredEmail}\\\\\"`;\nlet emailDatabase = JSON.stringify(msg.payload.databaseEmails, null, 4); \nif (emailDatabase.includes(resultString)) {\n    msg.payload = { status: false, email: enteredEmail, message: \"Email already exists.\" };\n} else {\n    msg.payload = { status: true, email: enteredEmail, message: \"Email added.\" };}\n// msg.payload = emailDatabase.includes(resultString);\n// msg.payload = resultString;\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 2580,
        "wires": [
            [
                "dccc0a653a5541bf"
            ]
        ]
    },
    {
        "id": "fb1acd15bdf51a60",
        "type": "http request",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "body",
        "url": "https://api.thingspeak.com/channels/2622720/feeds.json?api_key=FWIW2JFTHTTADZO1",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 250,
        "y": 2480,
        "wires": [
            [
                "24652ddb9a58cdfd"
            ]
        ]
    },
    {
        "id": "a35f889184595c11",
        "type": "join",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "useparts": false,
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 550,
        "y": 2580,
        "wires": [
            [
                "a7e23a7ee95daa1a"
            ]
        ]
    },
    {
        "id": "2165b2292763b349",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "Enter Email",
        "func": "msg.topic = \"formEmail\";\nmsg.payload = { formEmail: msg.payload.email}; // Assuming the form returns the email in `msg.payload`\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 2600,
        "wires": [
            [
                "a35f889184595c11"
            ]
        ]
    },
    {
        "id": "24652ddb9a58cdfd",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "Database Email",
        "func": "msg.topic = \"databaseEmails\";\nmsg.payload = { databaseEmails: msg.payload }; // Assuming the HTTP request returns the list of emails in `msg.payload`\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 2540,
        "wires": [
            [
                "a35f889184595c11"
            ]
        ]
    },
    {
        "id": "7feeae98ea87c6d7",
        "type": "ui_toast",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1230,
        "y": 2620,
        "wires": []
    },
    {
        "id": "dccc0a653a5541bf",
        "type": "switch",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "",
        "property": "payload.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 2580,
        "wires": [
            [
                "0b50e9a677b28789",
                "7c4d13cfddd9d314"
            ],
            [
                "cb9be315a72dbccd"
            ]
        ]
    },
    {
        "id": "b58965e30516c2ce",
        "type": "ui_toast",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1230,
        "y": 2520,
        "wires": []
    },
    {
        "id": "0b50e9a677b28789",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "Success",
        "func": "var success = {};\nsuccess.payload = \"Email added\";\nsuccess.topic = \"Success\"\nreturn success;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 2520,
        "wires": [
            [
                "b58965e30516c2ce"
            ]
        ]
    },
    {
        "id": "cb9be315a72dbccd",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "Fail",
        "func": "var fail = {}\nfail.payload = \"Email already exists\"\nfail.topic = \"Fail\"\n\nreturn fail;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 2620,
        "wires": [
            [
                "7feeae98ea87c6d7"
            ]
        ]
    },
    {
        "id": "dc113ad7c506477d",
        "type": "ui_form",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "682c30da44ac52f2",
        "name": "",
        "label": "",
        "group": "975a56c88443a6df",
        "order": 7,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Email",
                "value": "email",
                "type": "email",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "email": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "x": 110,
        "y": 2560,
        "wires": [
            [
                "fb1acd15bdf51a60",
                "2165b2292763b349"
            ]
        ]
    },
    {
        "id": "81a9e5f26a7c62d9",
        "type": "ui_form",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "Register",
        "label": "",
        "group": "0c9715f080d9707a",
        "order": 3,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Username",
                "value": "username",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "Password",
                "value": "password",
                "type": "password",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "username": "",
            "password": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": false,
        "x": 120,
        "y": 600,
        "wires": [
            [
                "e8ba9530b8a0089a",
                "3f9afaed38185bdf"
            ]
        ]
    },
    {
        "id": "3f9afaed38185bdf",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "Enter Account",
        "func": "msg.topic = \"enteredAccount\";\nlet account_name = msg.payload.username;\nlet account_password = msg.payload.password;\nmsg.payload = {username: account_name, password: account_password};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 620,
        "wires": [
            [
                "967660745bc37b08"
            ]
        ]
    },
    {
        "id": "0f24db331bc7c7b6",
        "type": "http request",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://api.thingspeak.com/update?api_key=LFALQA4G99WYARPO&field1={{payload.username}}&field2={{payload.password}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1090,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "e8ba9530b8a0089a",
        "type": "http request",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://api.thingspeak.com/channels/2632445/feeds.json?api_key=JA8MVJK4ELKLCWMX&results=2",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 290,
        "y": 540,
        "wires": [
            [
                "8060202cc6962ed2"
            ]
        ]
    },
    {
        "id": "8060202cc6962ed2",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "Database Account",
        "func": "msg.topic = \"databaseAccounts\"\nmsg.payload = {databaseAccount: msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 520,
        "wires": [
            [
                "967660745bc37b08"
            ]
        ]
    },
    {
        "id": "967660745bc37b08",
        "type": "join",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "useparts": false,
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 710,
        "y": 560,
        "wires": [
            [
                "d88a823d014461c8"
            ]
        ]
    },
    {
        "id": "d88a823d014461c8",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "Check Existed",
        "func": "let enteredAccountUsername = msg.payload.enteredAccount.username;\nlet enteredAccountPassword = msg.payload.enteredAccount.password;\nlet databaseAccounts = JSON.stringify(msg.payload.databaseAccounts, null, 4);\nlet resultString = `\\\\\"field1\\\\\":\\\\\"${enteredAccountUsername}\\\\\"`;\nif (databaseAccounts.includes(resultString)) {\n    msg.payload = { status: false, username: enteredAccountUsername, password: enteredAccountPassword, message: \"This username already exists\" };\n} else {\n    msg.payload = { status: true, username: enteredAccountUsername, password: enteredAccountPassword, message: \"Account added\" };}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 700,
        "wires": [
            [
                "64f2295ea5f13d61"
            ]
        ]
    },
    {
        "id": "64f2295ea5f13d61",
        "type": "switch",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "",
        "property": "payload.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 620,
        "wires": [
            [
                "357ea44dab969a74",
                "0f24db331bc7c7b6"
            ],
            [
                "54d84f33be19eba9"
            ]
        ]
    },
    {
        "id": "357ea44dab969a74",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "Success",
        "func": "msg.topic = \"Success\"\nmsg.payload = `${msg.payload.message}`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 580,
        "wires": [
            [
                "81c9acbcbbec3bdd"
            ]
        ]
    },
    {
        "id": "54d84f33be19eba9",
        "type": "function",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "Fail",
        "func": "msg.topic = \"Fail\"\nmsg.payload = `${msg.payload.message}`;\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 700,
        "wires": [
            [
                "a62c4d21c5cd643b"
            ]
        ]
    },
    {
        "id": "a62c4d21c5cd643b",
        "type": "ui_toast",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1310,
        "y": 700,
        "wires": []
    },
    {
        "id": "81c9acbcbbec3bdd",
        "type": "ui_toast",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1350,
        "y": 580,
        "wires": []
    },
    {
        "id": "cf637d4002e47aef",
        "type": "ui_button",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "",
        "group": "0c9715f080d9707a",
        "order": 4,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Cancel",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 200,
        "y": 680,
        "wires": [
            [
                "e934ae7383e325b8"
            ]
        ]
    },
    {
        "id": "e934ae7383e325b8",
        "type": "change",
        "z": "bb1ee2a6ccaf9c7e",
        "g": "7632c1f338ea3ccc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Log in\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 680,
        "wires": [
            [
                "598e6a60b0659603"
            ]
        ]
    },
    {
        "id": "ccf344de9006d84c",
        "type": "ui_spacer",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "spacer",
        "group": "a41ff99becdf55cd",
        "order": 2,
        "width": 2,
        "height": 1
    },
    {
        "id": "028d571dd97ab396",
        "type": "ui_spacer",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "spacer",
        "group": "a41ff99becdf55cd",
        "order": 4,
        "width": 2,
        "height": 1
    },
    {
        "id": "401cb1d8950e0354",
        "type": "ui_spacer",
        "z": "bb1ee2a6ccaf9c7e",
        "name": "spacer",
        "group": "242bb5e8cc6e236f",
        "order": 6,
        "width": 7,
        "height": 1
    },
    {
        "id": "242bb5e8cc6e236f",
        "type": "ui_group",
        "name": "Switch",
        "tab": "6ba0c56fa3a08f57",
        "order": 1,
        "disp": true,
        "width": 7,
        "collapse": false
    },
    {
        "id": "975a56c88443a6df",
        "type": "ui_group",
        "name": "Display",
        "tab": "6ba0c56fa3a08f57",
        "order": 2,
        "disp": true,
        "width": 12,
        "collapse": false
    },
    {
        "id": "3d9dae46dcba93c8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "172.21.57.182",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "5",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "d1aef56c328c2c49",
        "type": "ui_group",
        "name": "Status",
        "tab": "6ba0c56fa3a08f57",
        "order": 3,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "a41ff99becdf55cd",
        "type": "ui_group",
        "name": "Login",
        "tab": "3ff6f6dc28002473",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "0c9715f080d9707a",
        "type": "ui_group",
        "name": "Register",
        "tab": "499e76dd4fa8167b",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "6ba0c56fa3a08f57",
        "type": "ui_tab",
        "name": "Dashboard",
        "icon": "dashboard",
        "disabled": false,
        "hidden": true
    },
    {
        "id": "3ff6f6dc28002473",
        "type": "ui_tab",
        "name": "Log in",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "499e76dd4fa8167b",
        "type": "ui_tab",
        "name": "Register",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": true
    }
]